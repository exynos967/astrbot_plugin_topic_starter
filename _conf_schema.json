{
  "enabled": {
    "type": "bool",
    "description": "是否启用主动话题发起",
    "default": true
  },
  "tick_interval_seconds": {
    "type": "int",
    "description": "调度检查间隔（秒）",
    "default": 300,
    "hint": "建议 >= 60，间隔越短触发越频繁。"
  },
  "trigger_probability": {
    "type": "float",
    "description": "每次调度触发概率（0-1）",
    "default": 0.3
  },
  "cooldown_seconds": {
    "type": "int",
    "description": "同一会话主动发言冷却时间（秒）",
    "default": 1800
  },
  "silence_seconds": {
    "type": "int",
    "description": "会话静默阈值（秒），低于该值不主动发言",
    "default": 600
  },
  "message_window_size": {
    "type": "int",
    "description": "每个会话保留的最近消息条数",
    "default": 20
  },
  "auto_bind_on_message": {
    "type": "bool",
    "description": "收到普通消息时自动绑定当前会话",
    "hint": "开启后无需手动 `/topic_bind`，会在首次普通消息时自动绑定。",
    "default": true
  },
  "group_filter_mode": {
    "type": "string",
    "description": "群聊过滤模式",
    "hint": "none=不过滤；whitelist=仅列表内群生效；blacklist=屏蔽列表内群。",
    "options": [
      "none",
      "whitelist",
      "blacklist"
    ],
    "default": "none"
  },
  "group_filter_ids": {
    "type": "list",
    "description": "群号列表",
    "hint": "在 whitelist/blacklist 模式下生效，可填写群号，如 [\"123456\", \"987654\"]。",
    "default": []
  },
  "max_message_chars": {
    "type": "int",
    "description": "主动发言最大字数",
    "hint": "用于限制最终发送内容长度，避免消息过长。",
    "default": 30
  },
  "chat_provider_id": {
    "type": "string",
    "description": "指定用于主动发言文案生成的模型提供商（可选）",
    "hint": "为空时将自动使用当前会话模型；建议在这里固定一个可用 provider。",
    "_special": "select_provider",
    "default": ""
  },
  "fallback_topics": {
    "type": "list",
    "description": "兜底话题列表。格式：标题|描述",
    "default": [
      "最近最实用的 AI 工具你推荐哪个？|可以从工作、学习或娱乐角度聊聊。",
      "最近有哪部电影或剧值得补？|聊聊你最推荐的一部和理由。",
      "你现在最想提升的一项能力是什么？|为什么会选它？",
      "如果周末只做一件让你恢复精力的事，会选什么？|分享你的方式。"
    ]
  },
  "quiet_hours": {
    "type": "object",
    "description": "免打扰时段配置",
    "items": {
      "enabled": {
        "type": "bool",
        "description": "是否启用免打扰时段",
        "default": false
      },
      "start": {
        "type": "string",
        "description": "免打扰开始时间（HH:MM）",
        "default": "23:00"
      },
      "end": {
        "type": "string",
        "description": "免打扰结束时间（HH:MM）",
        "default": "08:00"
      }
    }
  }
}
